<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Carolina Downie" />


<title>annotations_final_project</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com">Shiny Dashboard</a>
</li>
<li>
  <a href="https://github.com/candacehaghighi/Data_Science_Final/">Final repository</a>
</li>
<li>
  <a href="https://github.com/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">annotations_final_project</h1>
<h4 class="author"><em>Carolina Downie</em></h4>
<h4 class="date"><em>12/4/2017</em></h4>

</div>


<div id="motivation-and-questions" class="section level1">
<h1>Motivation and Questions</h1>
<p>When our group was brainstorming what our final Data Science project would be, we started by looking for large public health-related datasets that were available on the web. We quickly found data about hospital rankings and comparisons from <a href="https://data.medicare.gov/data/hospital-compare">Medicare</a>, and decided it would be interesting to analyze the hospital rankings based on factors like geography, type of hospital ownership, and some of the criteria used to create the rankings. Upon doing some further reading, we learned that the roll-out of these Medicare Hospital Compare rankings in July 2016 was <a href="https://www.usnews.com/news/articles/2016-07-27/medicare-releases-controversial-hospital-star-ratings">controversial</a>. Many hospitals criticized the rankings, claiming that these scores were not accurate. Furthermore, there were complaints that major hospitals that consistently score highly in US News and World Reports rankings and other commercial rankings did not score highly on the <a href="https://www.npr.org/sections/health-shots/2016/07/27/487633215/many-well-known-hospitals-fail-to-score-high-in-medicare-rankings">Medicare rankings</a>, and instead relatively obscure hospitals received the highest rating (a rating of 5 stars). Given this information, we decided to analyze the Medicare data assess these claims. Questions that drove our analysis were:</p>
<ul>
<li><p>What was the geographic distribution of ratings? Did areas of the country that are known for having well-known hospital systems (eg NYC, Boston) have high Medicare scores? In what areas of the country were there hospitals with the lowest scores?</p></li>
<li><p>How did the distribution of ratings vary by hospital ownership type?</p></li>
<li><p>Were there important differences in the Top 20 Hospitals in 2016-2017 as ranked by <a href="https://web.archive.org/web/20160816171510/http://health.usnews.com/health-care/best-hospitals/articles/best-hospitals-honor-roll-and-overview">US News and World Reports</a> and the corresponding 2016 Medicare scores for these hospitals (i.e. were the complaints of these hospitals justified)?</p></li>
<li><p>Can we make a logistic model for patient satisfaction score based on other known hospital ranking criteria?</p></li>
</ul>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<p><strong>Medicare Hospital Data</strong></p>
<p><em>About the dataset</em></p>
<p>The main dataset that we chose to analyze was the <a href="https://data.medicare.gov/Hospital-Compare/Hospital-General-Information/xubh-q36u/data">Hospital General Information</a> dataset, which is published by the Centers for Medicare &amp; Medicaid Services and contains information about all hospitals in the United States (and U.S. Territories) that have been registered with Medicare. According to the Medicare <a href="https://data.medicare.gov/Hospital-Compare/Hospital-General-Information/xubh-q36u/about">website</a>, this dataset was created in May 2014 and was last updated in October 2017. We downloaded the datset as a csv file from <a href="https://data.medicare.gov/Hospital-Compare/Hospital-General-Information/xubh-q36u/data">Data.Medicare.gov</a> by clicking on the “Export” tab and selecting the CSV option from the Download section, which allowed us to download a copy of the dataset in a static format.</p>
<p>The <a href="https://www.cms.gov/medicare/quality-initiatives-patient-assessment-instruments/hospitalqualityinits/hospitalcompare.html">Hospital Compare</a> is a program that was created in 2002 which provides “information on how well hospitals provide recommended care to their patients,” based on a variety of measures including patient experiences, readmissions &amp; death rates, payment &amp; value of care. In 2016, “Overall Hospital Quality Star Rating” was added to the Hospital Compare metrics. More information about hospital ratings methodology can be found <a href="https://www.qualitynet.org/dcs/ContentServer?c=Page&amp;pagename=QnetPublic%2FPage%2FQnetTier3&amp;cid=1228775957165">here</a> and <a href="http://www.hcahpsonline.org/Files/October_2017_Star%20Ratings_Tech%20Notes.pdf">here</a>.</p>
<p><em>Data cleaning</em></p>
<p>In order to make a plot of the geographic distribution of hospital rankings, we needed to have the latitude and longitude of the hospitals; this information was provided in the “Location” variable, but as a coordinate pair, and with the accompanying address. To address this, we applied the <code>separate</code> function twice, first to separate <code>coordinates</code> and <code>address</code>, and then to separate <code>coordinates</code> into <code>latitude</code> and <code>longitude</code>.</p>
<p>However, when we looked through the resulting dataset, we noticed that there were quite a few hospitals that didn’t have latitude and longitude coordinates, which would prohibit us from being able to plot them on a map. To address this, we applied the <code>geocode</code> function from the <code>ggmap</code> package to the dataset, which takes an input address and provides the corresponding latitude and longitude.</p>
<p>We first applied <code>ggmap::geocode</code> using the <code>address</code> variable to look up coordinates; however after running this, we still had several hospitals for which it wasn’t able to find coordinates. So we then did the same thing, but using <code>hospital_name</code> as the input address information to try to find the coordinates for the hospitals that we had missed using <code>address</code>. After applying this process, there were only 4 hospitals for which we could not find corresponding geographical coordinates; since none of these were major, well-known hospitals, we removed them from the dataset. We then joined this dataset to our initial hospital dataset to replace the missing latitude and longitude values. We saved this updated dataset, which contained geographic coordinates for all of the hospitals as a csv file called <code>hospital_data_2</code> and used this dataset for all of our analyses.</p>
<p><strong>US News and World Reports Dataset</strong></p>
<p><em>About the dataset</em></p>
<p>Every year, US News &amp; World Reports ranks US hospitals across 16 different medical specialities based on a variety of measures, including survival, patient safety, and care-related indicators. The Best Hospitals Honor Roll is a list of the top 20 hospitals that had the highest ratings across all 16 Best Hospital specialties, nine procedures, and condition ratings. Total points for hospitals on the Best Hospital Honor Roll list are out of a maximum of <strong>448</strong>. More information about the US News &amp; World Reports methodology for the 2016-2017 rankings can be found <a href="http://web.archive.org/web/20160910084826/http://static.usnews.com:80/documents/health/best-hospitals/BH_Methodology_2016-17.pdf">here</a>.</p>
<p><em>Data scraping and cleaning</em></p>
<p>In order to be able to make comparisons to the US News and World Reports hospital rankings, we needed to scrape this data from the webpage where this information is listed. Because we wanted the rankings plus information about the US News and World Reports points/scoring criteria, we had to do a bit of searching to get the right data for the 2016-2017 ranking cycle. After first looking <a href="https://www.usnews.com/info/blogs/press-room/articles/2016-08-02/us-news-announces-the-201617-best-hospitals">here</a> (which had rankings, but no points), and <a href="https://health.usnews.com/health-care/best-hospitals/articles/best-hospitals-honor-roll-and-overview">here</a> (which had rankings and points, but was for 2017-2018), we realized we could use <a href="web.archive.org" class="uri">web.archive.org</a> to find the archived 2016-2017 rankings page with points, which we found <a href="https://web.archive.org/web/20160816171510/http://health.usnews.com/health-care/best-hospitals/articles/best-hospitals-honor-roll-and-overview">here</a>. Because we considered comparing the Medicare rankings to both the 2016-2017 and 2017-2018 rankings (and the webpages for these were in the same format), we wrote a function to scrape the US News &amp; World Reports data. We converted the <code>points</code> variable from a factor to a numeric value.</p>
<p>***EXPLANATION OF score normalization and comparison–Candace</p>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory analysis:</h1>
<p>We started our exploratory analysis by visualizing relationships of interest. This included hospital rating based on ownership (boxplot), hospital rating based on hospital type (boxplot), hospital rating distribution (barplot), and hospital rating vs. Patient Experience Level (Scatter plot). After this preliminary analysis, we recognized that these graphs were not particularly useful in visualizations for describing our data, however the preliminary analysis emphasized our interest to further explore patient experience through basic logistic regression.</p>
<p>Additionally, after reading some articles about controversial Medicare rankings we decided to compare US Scores and rankings to the Medicare rankings to see if there are any major discrepancies in scores. We were also interested in looking how the score of a hospital changed by region and ownership (Houston and UCLA showed major discrepancies between the two rating mechanisms). Our final logistic regression model looked at patient experience as the outcome and ownership (5 categories with government as the reference category), type (binary - critical care access available or not) and overall score (continous: scale from 1-5) as predictors.</p>
<p>Our final logistic regression model looked at patient experience as the outcome and ownership, type, and overall rating as predictors. We were interested to see how these factors influenced patient experience. Predictors which signficianyly affected patient experience were ownershhip, overall rating, and … We initiially used all categories of all variable in our model but with the low overall count found in the government-state, government-local, government-Hospital District or Authority, and government-federal; decided to collapse into one governmental dummy variable.</p>
</div>
<div id="discussion" class="section level1">
<h1>Discussion:</h1>
<p><em>Geographic distribution of hospitals with 1-5 star rankings:</em></p>
<p>To evaluate whether there were any interesting trends in the geographic distribution of hospitals with 1-5 star rankings, we created two different shiny plots. First, we created a new variable that assigned each hospital to its corresponding geographic region, which were created based on the <a href="https://web.archive.org/web/20130921053705/http://www.census.gov/geo/maps-data/maps/pdfs/reference/us_regdiv.pdf">Census regional divisions</a>, which was then used as an input widget for a shiny graph showing the number of hospitals with each ranking by state within the geographic region. This plot shows that across all regions, in general the majority of Medicare hospitals have a 3-star rating. Additionally, it shows within some regions, particular states have many more Medicare-funded hospitals than others; for example in the West South Central region, Texas has the highest number of hospitals compared to the rest of the states in the region.</p>
<p>In order to get a better understanding of this data, we decided to visually represent it by plotting a map of the location of each hospital, using star ranking as the shiny input widget. This map reveals several interesting trends.</p>
<p><em>Plotly stacked bar chart plot:</em></p>
<p>Claire</p>
<p><em>Hospital Ranking scores plot:</em></p>
<p>Nick</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
